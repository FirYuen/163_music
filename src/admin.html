<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <script src="../node_modules/leancloud-storage/dist/av-min.js"></script>
    <script src="../node_modules/@baiducloud/sdk/dist/baidubce-sdk.bundle.min.js"></script>
    <script src="https://cdn.bootcss.com/js-url/2.5.3/url.min.js"></script>
    <title>管理界面</title>
</head>

<body>

    <!-- <script>
        var APP_ID = 'IyMYfkHYfmI0gDAbyioJlqKW-gzGzoHsz';
        var APP_KEY = 'YW3c1V2tAOpqaVKWrzyJnsP3';

        AV.init({
            appId: APP_ID,
            appKey: APP_KEY
        });
        var Song = AV.Object.extend('Playlist');
        var Song = new Song();
        Song.save({
            name:"test",
            cover:"test",
            creator:"test",
            description:"test",
            songs:["1","2","3"]

        }).then(function (object) {
            console.log("Created Success");
        },()=>{
            alert("Failed!")
        })
    </script> -->

    <script>
        const config = {
   endpoint: "http://su.bcebos.com",         //传入Bucket所在区域域名
   credentials: {
      ak: "87d24385df0e410aa3bc8c812c7b6c3a",         //您的AccessKey
      sk: "f7c78405e6934b38860979137d9e836e"       //您的SecretAccessKey
   }
};

let bucket = 'music-163';

let options = {
prefix: 'music/' // 递归列出fun目录下的所有文件
};
let client = new baidubce.sdk.BosClient(config);

// client.putObjectFromString(bucket, key, 'hello world')
//     .then(response => console.log(response))    // 成功
//     .catch(error => console.error(error));      // 失败
music = {

}
client.listObjects(bucket,options)
  .then(function (response) {
      var contents = response.body.contents;
      for (var i = 1, l = contents.length; i < l; i++) {
        music[contents[i].key.replace('music/','').replace('.mp3 ','')]=encodeURI('https://music-163.su.bcebos.com/'+contents[i].key)
  
      }
      console.log(music);
      
  })
  .catch(function (error) {
      // 查询失败
  });
    </script>
</body>

</html>